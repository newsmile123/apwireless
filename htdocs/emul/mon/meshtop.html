<HTML>
<HEAD>

	<TITLE>Mesh Topology Tree</TITLE><LINK rel="stylesheet" href="../orinoco/css/global.css">
	<SCRIPT language="javascript" src="../orinoco/scripts/library.js"></SCRIPT>

<style>
	a, A:link, a:visited, a:active
		{color: #3c5580; text-decoration: none; font-family: Arial; font-size: 12px}
	A:hover
		{color: #3c5580; text-decoration: none; font-family: Arial; font-size: 12px}
	p, tr, td, ul, li
		{color: #000000; font-family: Arial; font-size: 14px}
	.header1, h1
		{color: #ffffff; background: #4682B4; font-family: Arial; font-size: 16px; margin: 0px; padding: 2px;}
	.header2, h2
		{color: #000000; background: #DBEAF5; font-family: Arial; font-size: 15px;}
	.intd
		{color: #000000; font-family: Arial; font-size: 14px; padding-left: 15px; padding-right: 15px;}
	.ctrl
		{font-family: Arial, sans-serif; font-size: 15px; width: 100%; }
	form
		{ margin: 5px;}
</style>

<SCRIPT language="Javascript" >
function tree(tm0,tm1)
{
	this.tm2=tm1;
	this.tm3=tm0;
	this.tm4=this;
	this.tm5=[];
	this.tm6=null;
	this.tm7=-1;
	
	var tm8=new Image(),tm9=new Image();
	tm8.src=tm1['icon_e'];
	tm9.src=tm1['icon_l'];
	tm1['im_e']=tm8;
	tm1['im_l']=tm9;
	for(var i=0;i<64;i++)
	if(tm1['icon_'+i])
	{
		var tmA=new Image();
		tm1['im_'+i]=tmA;tmA.src=tm1['icon_'+i]
	}
	this.tmB=function(tmC)
	{
		var tmD=this.tm5[tmC];
		tmD.tmE(tmD.tmF)
	};
	this.tmG=function(tmC)
	{
		var tmD=this.tm5[tmC];
		tmD.tmE(tmD.tmF);
		return this.tm5[tmC].tmG()
	};
	this.tmH=function(tmC)
	{
		this.tm5[tmC].tmI(true)
	};
	this.tmJ=function(tmC)
	{
		this.tm5[tmC].tmI()
	};
	this.tmK=[];
	for(var i=0;i<tm0.length;i++)
		new tmL(this,i);
	this.tmC=trees.length;
	trees[this.tmC]=this;
	for(var i=0;i<this.tmK.length;i++)
	{
		document.write(this.tmK[i].tmM());
		this.tmK[i].tmE()
	}
}
function tmL(tmN,tmO)
{
	this.tm7=tmN.tm7+1;this.tm3=tmN.tm3[tmO+(this.tm7?2:0)];
	if(!this.tm3)return;
	this.tm4=tmN.tm4;
	this.tmN=tmN;this.tmO=tmO;
	this.tmF=!this.tm7;
	this.tmC=this.tm4.tm5.length;
	this.tm4.tm5[this.tmC]=this;
	tmN.tmK[tmO]=this;this.tmK=[];
	for(var i=0;i<this.tm3.length-2;i++)
		new tmL(this,i);
	this.tmP=tmQ;
	this.tmE=tmR;
	this.tmG=tmS;
	this.tmM=tmT;
	this.tmI=tmU;
	this.tmV=function()
	{
		return this.tmO==this.tmN.tmK.length-1
	}
}
function tmR(tmW)
{
	var tmX=tmY('i_div'+this.tm4.tmC+'_'+this.tmC);
	if(!tmX)
		return;
	if(!tmX.innerHTML)
	{
		var tmK=[];
		for(var i=0;i<this.tmK.length;i++)
			tmK[i]=this.tmK[i].tmM();
		tmX.innerHTML=tmK.join('')
	}
	tmX.style.display=(tmW?'none':'block');
	this.tmF=!tmW;
	var tmZ=document.images['j_img'+this.tm4.tmC+'_'+this.tmC],tma=document.images['i_img'+this.tm4.tmC+'_'+this.tmC];
	if(tmZ)tmZ.src=this.tmP(true);
	if(tma)tma.src=this.tmP();
	this.tmI()
}
function tmS(tmb)
{
	if(!tmb)
	{
		var tmc=this.tm4.tm6;
		this.tm4.tm6=this;
		if(tmc)tmc.tmG(true)
	}
	var tma=document.images['i_img'+this.tm4.tmC+'_'+this.tmC];
	if(tma)
		tma.src=this.tmP();
	tmY('i_txt'+this.tm4.tmC+'_'+this.tmC).style.fontWeight=tmb?'normal':'bold';
	this.tmI();
	return Boolean(this.tm3[1])
}
function tmU(tmd)
{
	window.setTimeout('window.status="'+(tmd?'':this.tm3[0]+(this.tm3[1]?' ('+this.tm3[1]+')':''))+'"',10)
}
function tmT()
{
	var tme=[],tmf=this.tmN;
	for(var i=this.tm7;i>1;i--)
	{
		tme[i]='<img src="'+this.tm4.tm2[tmf.tmV()?'icon_e':'icon_l']+'" border="0" align="absbottom">';
		tmf=tmf.tmN
	}
	return '<table cellpadding="0" cellspacing="0" border="0"><tr><td nowrap>'+
			(this.tm7?tme.join('')+(this.tmK.length?'<a href="javascript: trees['+
			this.tm4.tmC+'].tmB('+this.tmC+')" onmouseover="trees['+this.tm4.tmC+'].tmJ('+this.tmC+')" onmouseout="trees['+
			this.tm4.tmC+'].tmH('+this.tmC+')"><img src="'+this.tmP(true)+'" border="0" align="absbottom" name="j_img'+
			this.tm4.tmC+'_'+this.tmC+'"></a>':'<img src="'+this.tmP(true)+'" border="0" align="absbottom">'):'')+
			'<a href="'+this.tm3[1]+'" target="'+this.tm4.tm2['target']+'" onclick="return trees['+this.tm4.tmC+'].tmG('+
			this.tmC+')" ondblclick="trees['+this.tm4.tmC+'].tmB('+this.tmC+')" onmouseover="trees['+this.tm4.tmC+'].tmJ('+
			this.tmC+')" onmouseout="trees['+this.tm4.tmC+'].tmH('+this.tmC+')" class="t'+this.tm4.tmC+'i" id="i_txt'+
			this.tm4.tmC+'_'+this.tmC+'"><img src="'+this.tmP()+'" border="0" align="absbottom" name="i_img'+this.tm4.tmC+
			'_'+this.tmC+'" class="t'+this.tm4.tmC+'im">'+this.tm3[0]+'</a></td></tr></table>'+
			(this.tmK.length?'<div id="i_div'+this.tm4.tmC+'_'+this.tmC+'" style="display:none"></div>':'')
}
function tmQ(tmg)
{
	return this.tm4.tm2['icon_'+((this.tm7?0:32)+(this.tmK.length?16:0)+(this.tmK.length&&this.tmF?8:0)+
			(!tmg&&this.tm4.tm6==this?4:0)+(tmg?2:0)+(tmg&&this.tmV()?1:0))]
}
var trees=[];
tmY=document.all?function(tmh)
{
	return document.all[tmh]
}:
function(tmh)
{
	return document.getElementById(tmh)
};

 AP_NAME = 0;
 AP_UPLINK = 1;
 AP_MAC_ADDR = 2;
 AP_HOPS_TO_PORTAL = 3;
 
  var treeDataArray = [  	
 
[' ',' ',' ',0]
      ]
		 
  var TREE_ITEMS = new Array();

  function transposeData() {
     index0=0;
     index1=1;
     index2=-1;
     index3=-1;
     index4=-1;
     index5=-1;
     
     TREE_ITEMS[0]= new Array();
     TREE_ITEMS[0][0]=treeDataArray[0][AP_NAME]+' ('+treeDataArray[0][AP_MAC_ADDR]+')  Mesh Portal';
     TREE_ITEMS[0][1]=null;

     for (i=1; i<treeDataArray.length-1; i++) {

        if (treeDataArray[i-1][AP_HOPS_TO_PORTAL]<treeDataArray[i][AP_HOPS_TO_PORTAL]){
             switch (treeDataArray[i][AP_HOPS_TO_PORTAL]) {
             case 0:
                index1=0;
                addNode(i, index0, index1, index2, index3, index4, index5 );
                index1=1;
		break;
             case 1:
                index1=index1+1;
		index2=0;
                addNode(i, index0, index1, index2, index3, index4, index5 );
		index2=1;
		break;
             case 2:
                index2=index2+1;
		index3=0;
                addNode(i, index0, index1, index2, index3, index4, index5 );
		index3=1;
		break;
             case 3:
                index3=index3+1;
		index4=0;
                addNode(i, index0, index1, index2, index3, index4, index5 );
		index4=1;
		break;
             case 4:
                index4=index4+1;
		index5=0;
                addNode(i, index0, index1, index2, index3, index4, index5 );
		index5=1;
		break;

             default:

             }
        }
        else if (treeDataArray[i-1][AP_HOPS_TO_PORTAL]==treeDataArray[i][AP_HOPS_TO_PORTAL]){
             switch (treeDataArray[i][AP_HOPS_TO_PORTAL]) {
             case 0:
                index0=index0+1;
                index1=0;
                addNode(i, index0, index1, index2, index3, index4, index5 );
                index1=1;
		break;
             case 1:
                index1=index1+1;
		index2=0;
                addNode(i, index0, index1, index2, index3, index4, index5 );
		index2=1;
		break;

            case 2:
               index2=index2+1
               index3=0;
               addNode(i, index0, index1, index2, index3, index4, index5 );
               index3=1;
               break;

            case 3:
               index3=index3+1;
               index4=0;
               addNode(i, index0, index1, index2, index3, index4, index5 );
               index4=1;
               break;

             case 4:
               index4=index4+1;
	       index5=0
              addNode(i, index0, index1, index2, index3, index4, index5 );
              index5=1;
              break;
           
             default:

             }
        }
        else if (treeDataArray[i-1][AP_HOPS_TO_PORTAL]>treeDataArray[i][AP_HOPS_TO_PORTAL]){
             switch (treeDataArray[i][AP_HOPS_TO_PORTAL]) {
             case 0:
               index1=0;
                index2=-1;
	       index3=-1;       
               index4=-1;
	       index5=-1;  
               addNode(i, index0, index1, index2, index3, index4, index5 );
               index1=1;
                   
               break;
            case 1:
               index1=index1+1;
               index2=0;
               index3=-1;
	       index4=-1;
	       index5=-1;       
               addNode(i, index0, index1, index2, index3, index4, index5 );
               index2=1;
	                      break;
            case 2:
               index2=index2+1;
               index3=0;
               index4=-1;
	       index5=-1;  
               addNode(i, index0, index1, index2, index3, index4, index5 );
               index3=1;
                    
               break;
            case 3:
               index3=index3+1;
               index4=0;
               index5=-1;

               addNode(i, index0, index1, index2, index3, index4, index5 );
               index4=1;
                              break;
            case 4:
               index4=index4+1;
               index5=0;
               addNode(i, index0, index1, index2, index3, index4, index5 );
               index5=1;
               break;

             default:

             }
        }
     }
  }

  function addNode(dataIndex, index0, index1, index2, index3, index4, index5 ) {

     data = treeDataArray[dataIndex][AP_NAME]+' ('+treeDataArray[dataIndex][AP_MAC_ADDR]+')';
      if (index5 != -1) {
         TREE_ITEMS[index0][index1][index2][index3][index4] = new Array();
         TREE_ITEMS[index0][index1][index2][index3][index4][index5]=data;
         TREE_ITEMS[index0][index1][index2][index3][index4][index5+1]=null;    
      }
      else if (index4 != -1) {
         TREE_ITEMS[index0][index1][index2][index3] = new Array();
         TREE_ITEMS[index0][index1][index2][index3][index4]=data;
         TREE_ITEMS[index0][index1][index2][index3][index4+1]=null; 
      }
      else if (index3 != -1) {
         TREE_ITEMS[index0][index1][index2] = new Array();
         TREE_ITEMS[index0][index1][index2][index3]=data;
         TREE_ITEMS[index0][index1][index2][index3+1]=null; 
      }
      else if (index2 != -1) {
         TREE_ITEMS[index0][index1] = new Array();
         TREE_ITEMS[index0][index1][index2]=data;
         TREE_ITEMS[index0][index1][index2+1]=null; 
      }
      else if (index1 != -1) {
         TREE_ITEMS[index0] = new Array();
         TREE_ITEMS[index0][index1]=data;
         TREE_ITEMS[index0][index1+1]=null; 
      } 



  }
  
 var tree_tpl = {
       'target'  : 'content',	// name of the frame links will be opened in
                               // other possible values are: _blank, _parent, _search, _self and _top

       'icon_e'  : '../orinoco/images/empty.gif', // empty image
       'icon_l'  : '../orinoco/images/line.gif',  // vertical line

  'icon_32' : '../orinoco/images/base.gif',   // root leaf icon normal
  'icon_36' : '../orinoco/images/base.gif',   // root leaf icon selected

  'icon_48' : '../orinoco/images/base.gif',   // root icon normal
       'icon_52' : '../orinoco/images/base.gif',   // root icon selected
       'icon_56' : '../orinoco/images/base.gif',   // root icon opened
       'icon_60' : '../orinoco/images/base.gif',   // root icon selected

       'icon_16' : '../orinoco/images/base.gif', // node icon normal
       'icon_20' : '../orinoco/images/base.gif', // node icon selected
       'icon_24' : '../orinoco/images/base.gif', // node icon opened
       'icon_28' : '../orinoco/images/base.gif', // node icon selected opened

       'icon_0'  : '../orinoco/images/base.gif', // leaf icon normal
       'icon_4'  : '../orinoco/images/base.gif', // leaf icon selected

       'icon_2'  : '../orinoco/images/joinbottom.gif', // junction for leaf
       'icon_3'  : '../orinoco/images/join.gif',       // junction for last leaf
       'icon_18' : '../orinoco/images/plusbottom.gif', // junction for closed node
       'icon_19' : '../orinoco/images/plus.gif',       // junctioin for last closed node
       'icon_26' : '../orinoco/images/minusbottom.gif',// junction for opened node
       'icon_27' : '../orinoco/images/minus.gif'       // junctioin for last opended node
};

</SCRIPT>
	
</HEAD>

<BODY style="margin:0px" background="../orinoco/images/bg.gif" rightmargin="0">

<SCRIPT language="javascript">
	grp_live = 2;
	subgrp_live = 8;
	tri_grp_live = 17;
	tri_subgrp_live = 0;

    var AP2000 = "1.3.6.1.4.1.11898.2.4.6";
	var AP600  = "1.3.6.1.4.1.11898.2.4.10";
	var AP4000 = "1.3.6.1.4.1.11898.2.4.12";
    var AP700  = "1.3.6.1.4.1.11898.2.4.13";

    var MeshLicensed = 1;
    if (MeshLicensed == 0) {
        location.href="noMeshLicense.html";
    }

	// check product is mesh capable
    var ProductId  = "1.3.6.1.4.1.11898.2.4.12";	
	if((ProductId.indexOf(AP2000) !=-1) || (ProductId.indexOf(AP600) !=-1) || 
        (ProductId.indexOf(AP700) != -1)) 
	     location.href="meshinvalid.html";

    // check product is mesh enabled
	var meshMode = parseInt('1');    
    var meshAPnumber = parseInt('0');    
    if (meshMode == 0){
	   // mesh not supported	
	   location.href="meshinvalid.html";
    }
		
    if (meshAPnumber == 0){
	   // mesh disabled or mesh neigbour	
       location.href="meshnotop.html";
    }
	
	
</SCRIPT>


<SCRIPT language="javascript" src="../orinoco/scripts/menu.js"></SCRIPT>

<!-- Start Header -->
<!-- <BODY style="margin:0px"> -->
<TABLE width="100%" height="100%" cellpadding="0" cellspacing="0">
	<TR>
		<TD>
			<TABLE width="150" height="90" cellpadding="0" cellspacing="0">
			<TR>
			<TD valign="top"><IMG src="../orinoco/images/logo.gif"></TD>
			</TR>
			<TR>
			<TD align="right">&nbsp;</TD>
			</TR>
			</TABLE>
		</TD>
		<TD valign="bottom">
			<TABLE cellpadding="0" cellspacing="0" width="100%"> <!-- For the table -->
				<!-- For the first row -->
				<TR>
					<TD>
						<TABLE class="tabrow" cellpadding="0" cellspacing="0">
							<SCRIPT language="javascript">
		                            		var ProductId  = "1.3.6.1.4.1.11898.2.4.12";													
                                                                var slotA = '4 ';
		                            		        var slotB = '6 ';
		                            		        var secModeA = '6';  
		                            		        var secModeB = '1';  
								InitMenu(ProductId, slotA, slotB, secModeA, secModeB);
								var nbrTabs = subNumArray[grp_live];
								if(nbrTabs>5)
								{
									var start,finish;
									var nbrTabsDivbyTwo = (nbrTabs - (nbrTabs%2))/2;
									if(subgrp_live >= (nbrTabsDivbyTwo + (nbrTabs%2)) )
									{
										start = 0;
										finish = nbrTabsDivbyTwo -1;
									}
									else
									{
										if ((nbrTabs %2)==0)
										{
											start = nbrTabsDivbyTwo;
											finish = nbrTabs-1;
										}
										else
										{
											start = nbrTabsDivbyTwo+1;
										finish = nbrTabs-1;
									}
										
									}
									drawTabRow(subgrpArray[grp_live],grp_live,subgrp_live,start,finish,1,1);
									document.write('<TD align="middle" background="../orinoco/images/edge.gif">&nbsp;</TD>');
									document.write('</TABLE>');
									document.write('</TD>');
									document.write('</TR>');
									<!-- For the second row -->
									document.write('<TR>');
									document.write('<TD>');
									document.write('<TABLE class="tabrow" cellpadding="0" cellspacing="0">');
									if(subgrp_live >= (nbrTabsDivbyTwo+ (nbrTabs%2)))
									{
										start = nbrTabsDivbyTwo;
										finish = nbrTabs-1;
									}
									else
									{
										if ((nbrTabs %2)==0)
										{
											start = 0;
											finish = nbrTabsDivbyTwo-1;
										}
										else
										{
										start = 0;
											finish = nbrTabsDivbyTwo;
										}
									}
									drawTabRow(subgrpArray[grp_live],grp_live,subgrp_live,start,finish,2,0);
									document.write('<TD align="middle" background="../orinoco/images/iedge.gif">&nbsp;</TD>');
								}
								else
								{
									drawTabRow(subgrpArray[grp_live],grp_live,subgrp_live,0,nbrTabs-1,0,0);
									document.write('<TD align="middle" background="../orinoco/images/edge.gif">&nbsp;</TD>');
								}
							</SCRIPT>
						</TABLE>
					</TD>
				</TR>
			</TABLE>
		</TD>
	</TR>

	
	<TR>
		<TD valign="top">
			<TABLE align="center" cellpadding="10" cellspacing="0">
				<SCRIPT language="javascript">
					drawButtons(grp,grp_live);
				</SCRIPT>
			</TABLE>
		</TD>
<!-- End Header -->

<TD bgcolor="white" height="95%" valign="top">
<TABLE bgcolor="white" style="margin-left:25px; margin-bottom:25; margin-top: 5px" cellspacing="0" cellpadding="0" border="0" width="588">
<!-- Start Subtabs -->

	<TR>
		<TD>
			<TABLE cellpadding="0" cellspacing="0" width="95%">
				<TR>
					<TD>&nbsp;</TD>
				</TR>
				<TR>
					<TD>
						<TABLE cellpadding="0" cellspacing="0" width="100%">
							<TR>
								<TD>
									<TABLE class="tabrow" cellpadding="0" cellspacing="0">
										<SCRIPT language="javascript">
											var nbrTabs = subNumArray[tri_grp_live];
											drawTabRow(subgrpArray[tri_grp_live],tri_grp_live,tri_subgrp_live,0,nbrTabs-1,4,0);
										</SCRIPT>
										<TD align="middle" background="../orinoco/images/edge.gif">&nbsp;</TD>
									</TABLE>
								</TD>
								<TD align="right" class="subtab-corner">&nbsp;</TD>
							</TR>
						</TABLE>
					</TD>
				</TR>
				<!-- End Subtabs -->
				<TR>					
					<TD>
						<TABLE bgcolor="white" cellpadding="0" cellspacing="0" border="0">
						<TR>
							<TD background="../orinoco/images/left_line.gif">&nbsp;</TD>


<TD bgcolor="white" height="95%" valign="top">
<FORM method="post" id="form1" name="form1" ACTION="/mon/meshtop.html/systemconfig">
	<TABLE cellpadding="0" cellspacing="0" style="margin-left:25px; margin-bottom:25; margin-top:5px" border="0" width="599">
		<TR>
			<TD class="verbiage" colspan="2">
				<p class="verbiage">This tab displays the topology of the Mesh network.</p>
			</TD>
 			<TD  align="right" colspan="1"><a href="#" onclick="location.reload()"><img src="../orinoco/images/button-refresh.gif" width="32" height="32" alt="Refresh" border="0"></a></TD>
		</TR>
		<TR>
			<TD colspan="2">
				<TABLE cellpadding="0" cellspacing="0" border="0" width="70%">
					<TR>
						<TD colspan="2">&nbsp;</TD>
					</TR>	
                    			<TR>
						<TD colspan="2" class="tableheader">
						    <script language="JavaScript">	
						    document.write("Total Number of Mesh Access Points : "+(treeDataArray.length-1));
							</script> 	
						</TD>
					</TR>	
					<TR>
						<TD colspan="2">&nbsp;</TD>
					</TR>
					<TR>
					    <TD colspan="2">
					          <script language="JavaScript">					        
				                            transposeData();
				                            new tree (TREE_ITEMS, tree_tpl);
			                          </script> 						
						</TD>		
					</TR>																		
				</TABLE>
			</TD>
		</TR>
	</TABLE>
</FORM>
</TD>


							<TD background="../orinoco/images/right_line.gif">&nbsp;</TD>
						</TR>
						<TR>
							<TD><IMG src="../orinoco/images/bottomleft_corner.gif" width="25" height="25" alt="" border="0"></TD>
							<TD><IMG src="../orinoco/images/bottom_line.gif" width="100%" height="25" alt="" border="0"></TD>
							<TD><IMG src="../orinoco/images/bottomright_corner.gif" width="25" height="25" alt="" border="0"></TD>
						</TR>

						</TABLE>
					</TD>
				</TR>
			</TABLE>


		</TD>
	</TR>
</TR>
</TABLE>

<!-- Start Footer -->
	<FORM name="rebootform" method="post" ACTION="/prototail.html">
		<INPUT type="hidden" id="rebootflag" name="EmWeb_ns:snmp:568" value="0" class="formtext">
	</FORM>

	</TR>
</TABLE>
</BODY>
</HTML>
<!-- End Footer -->



</BODY>
</HTML>
