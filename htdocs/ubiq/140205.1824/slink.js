function ack2meters(b,a){if(b<a){return 0}return(b-a)*150}function AckController(c,b,a){this.ack=c;this.dst=b;this.slider=a;this.maximum=0;c.controller=this;b.controller=this;a.controller=this;this.setMaximum=function(d){this.maximum=d};this.updated=function(d,e){if(e<0){e=0}else{if(e>this.maximum){e=this.maximum}}this.slider._isChanging=true;this.slider.setValue(Math.round(e));this.slider._isChanging=false;this.dst.setValue(Math.round(e));this.ack.setValue(e)}}function createSlider(c,b){var e=1.609344;var d=new Slider(document.getElementById("slider-1"),document.getElementById("slider-input-1"));var g=document.getElementById("acktimeout");var f=document.getElementById("distance");var a=new AckController(g,f,d);a.setMaximum(ack2meters(b,c)/100/e);d.setMaximum(Math.round(ack2meters(b,c)/100/e));d.onchange=function(){if(!this._isChanging){this.controller.updated(this,this.getValue())}};f.slider=d;f.onchange=function(){var h=parseFloat(this.value);var k;if(isNaN(h)){h=0}k=Math.floor(h*10);this.controller.updated(this,k)};f.distkm=document.getElementById("distkm");f.setValue=function(h){this.value=h/10;if(this.distkm){this.distkm.innerHTML=Math.round(h*e)/10}};g.slider=d;g.distance=document.getElementById("ackdistance");g.setValue=function(k){var h=Math.round(k*100*e);this.value=Math.round(h/150)+c;if(this.distance){this.distance.value=Math.round(h/150)*150}};g.onchange=function(){var h=parseInt(this.value);var k;if(isNaN(h)){h=c}k=ack2meters(h,c)/100/e;this.controller.updated(this,k)};g.onchange()}function createQDurSlider(){if(!document.getElementById("slider-2")){return}var a=new Slider(document.getElementById("slider-2"),document.getElementById("slider-input-2"));a.setMinimum(5);a.setMaximum(100);a.setMaxMarker(100);a.onchange=function(){$("#qdur").val(this.getValue())};a.setValue($("#qdur").val())}function createTxPowerSlider(c){var b=new Slider(document.getElementById("slider-2"),document.getElementById("slider-input-2"));var a=document.getElementById("txpower");b.setMinimum(-40);b.setMaximum(40);b.setMaxMarker(40);b.onchange=function(){$("#txpower").val(this.getValue())};a.slider=b;a.onchange=function(){var d=parseInt(this.value);if(isNaN(d)){d=0}this.slider.setValue(d)};a.onchange()}function setESSID(e,g,b){var h=$("#essid");var a=$("#apmac");if(e.essid.length>0){h.val(e.essid);a.val(!b?"":e.mac)}else{h.val("any");a.val(e.mac)}var f=$("#clksel_select").val();if(f!=g&&f!="E"){$("#clksel_select").val(g=="0"?"E":g);$("#clksel_select").change()}var c=e.encryption.toLowerCase();if(c=="-"){c="none"}if(c=="wpa"||c=="wpa2"){if(e.pairwise_ciphers.indexOf("CCMP")>=0){c+="aes"}else{if(e.pairwise_ciphers.indexOf("TKIP")>=0){c+="tkip"}}}$("#security").val(c);$("#security").change();var d="WPA-PSK";if(e.auth_suites.toLowerCase().indexOf("802.1x")>=0){d="WPA-EAP"}$("#wpa_auth").val(d);$("#wpa_auth").change();if(e.htcap==0){$("#rate_auto").attr("checked",true);$("#rate option:eq(0)").attr("selected","selected")}}function ieee_mode_fixer(b,a){this.ieee_mode=b.toLowerCase();if(a==""){a="0"}this.clksel=a;this.isATurbo=function(){return this.ieee_mode=="at"||this.ieee_mode=="ast"};this.getIEEEMode=function(){if(this.isATurbo()){return"a"}if(this.ieee_mode.length>6){return this.ieee_mode.substr(0,6)}return this.ieee_mode};this.getClkSel=function(){if(this.isATurbo()){return"T"}if(this.ieee_mode.length>=8&&this.ieee_mode.substr(6,2)=="40"){return"E"}return this.clksel};this.getExtChannel=function(){var c=null;if(this.ieee_mode.length>=8&&this.ieee_mode.substr(6,2)=="40"){c=this.ieee_mode.substr(8);if(c!="minus"&&c!="plus"){c=""}}return c}}var rates_cck=[1,2,5.5,11];var rates_ofdm=[6,9,12,18,24,36,48,54];var rates_ht20=[6.5,13,19.5,26,39,52,58.5,65];var rates_ht40=[15,30,45,60,90,120,135,150];function hasCCK(a){return(a=="b"||a=="g"||a=="pureg")}function hasOFDM(a){return(a=="a"||a=="g"||a=="pureg")}function hasHT(a){return(a=="11naht"||a=="11nght")}function compareNum(d,c){return d-c}function init_rates(b,m,k,r,u,a){var p=document.getElementById(u);if(!p){return r}var q=1;var l=1;var x=[];var h;var v,t;if(!b||b[getRegdomainMode(m)]){if(globals.chanbw==0){switch(parseInt(k)){case 1:q=2;break;case 2:q=4;break;case"E":l=1;break;case"T":l=2;break}}if(hasCCK(m)&&k==0){x=x.concat(rates_cck)}if(hasOFDM(m)){x=x.concat(rates_ofdm)}if(hasHT(m)){for(v=1;v<=radio_chains;v++){h=x.length;x=(k=="E")?x.concat(rates_ht40):x.concat(rates_ht20);for(t=h;t<x.length;t++){x[t]=x[t]*v}}}else{x.sort(compareNum)}}var c=p.options;c.length=0;var w=x.length;var y=$("#wmode").val();is_ap=(y=="ap"||y=="aprepeater");for(v=w-1;v>=0;v--){var n=hasHT(m)?v:x[v];var e=x[v];var d=0;var s="MCS "+v+" - ";if((k=="E")&&!is_ap){var g=v%8;var f=Math.floor(v/8)+1;e=rates_ht20[g]*f;d=rates_ht40[g]*f}e*=(l/q);d*=(l/q);if(globals.chanbw){e*=(globals.chanbw/20);d*=(globals.chanbw/40)}s+=(Math.round(10*e)/10);if(d){s+=(" ["+(Math.round(10*d)/10)+"]")}c[c.length]=new Option(s,n,false,r==n)}if(a){p.selectedIndex=0}$(document).trigger("rate_list_updated");return c.length?p.options[p.selectedIndex].value:r}function setWepEnabled(a,b){$("#wep_key_length, #wep_key_id, #wep_key, #wep_key_type").enable(a);if(b&&a){$("#wep_key").focus()}}function setWpaEnabled(b,e){var c=$("#wpa_key");var d=$("#wpa_auth");var a=d.val();c.disable(!b);d.disable(!b);var f=(a&&a.toUpperCase()=="WPA-PSK");if(f){$(".i_wpaeap").disable();$(".i_wpapsk").disable(!b);$(".wpaeap").hide();$(".wpapsk").toggle(b)}else{$(".i_wpapsk").disable();$(".i_wpaeap").disable(!b);$(".wpapsk").hide();$(".wpaeap").toggle(b);toggleRadiusAcct()}if(e&&b){if(f){c.focus()}else{$(".wpaeap .pwd").focus()}}}function setNoSecEnabled(b,c){var a=$("#radius_mac_acl_status").is(":checked");if(b){$(".radmacacl").toggle(a);$(".i_radaclmac").disable(!a);$(".i_radaclmacform").disable(!a);$(".radaclmacform").toggle(a);toggleRadiusAcct()}else{$(".nosec").toggle(b);$(".i_radaclmacform").disable(!b);$(".radaclmacform").toggle(b)}}function setAuthTypeEnabled(a){$('[name="authtype"]').enable(a)}function setMACClone(a){var b=$("#macclone").enable(a);if(!a){b.attr("checked",false)}}function setAutoWDS(a){var b=$("#wds_auto").enable(a);if(!a){b.attr("checked",false)}}function setWDSPeers(b){var a=$("[name^=peer]").enable(b);if(!b){a.val("")}}function chooseSecurity(h,e){var f=h.value.toUpperCase();var c=document.getElementById("wmode");var g=false;var k=false;var a=false;var d=false;var l=true;var b=true;if(c!=null){c=c.value.toLowerCase()}if(f=="WEP"){g=false;k=true;d=true;updateWepError()}else{if(f.substring(0,3)=="WPA"){g=true;k=false;d=false;l=false;if(c=="aprepeater"){b=false}}else{a=true}}$(".nosec").toggle(a);$(".wpa").toggle(g);$(".wep").toggle(k);setWpaEnabled(g,e);setWepEnabled(k,e);setNoSecEnabled(a,e);setAuthTypeEnabled(d);setMACClone(l);setAutoWDS(b);setWDSPeers(b)}function chooseWPA(a,d){var c=$("#security").val().toUpperCase();var b=(c.substring(0,3)=="WPA");if(c=="NONE"){setNoSecEnabled(true,d)}else{setWpaEnabled(b,d)}}function chooseDiversity(a,f,e){var d=document.getElementById(f);var c=document.getElementById(e);var b=false;if(a.checked){b=true}d.disabled=b;c.disabled=b}var RADSecret_regex=/^[\x20-\x7e]*$/;function validateRadiusSecret(c,a,b){if(b!=null&&b.length>0&&b.length<33&&RADSecret_regex.exec(b)!=null){return true}return false}var HwAddr_regex=/^([0-9a-fA-F][0-9a-fA-F]:){5}([0-9a-fA-F][0-9a-fA-F])$/;function validateHwAddr(c,a,b){if(c=="peer1"){if(!$("#wds_auto").is(":checked")&&!b){return false}}if(b!=null&&b.length>0&&HwAddr_regex.exec(b)==null){return false}return true}var WEP64_regex=/^([0-9]|[a-f]|[A-F]){10}$/;var WEP128_regex=/^([0-9]|[a-f]|[A-F]){26}$/;function updateWepError(){var b=document.getElementById("wep_key");var c=document.getElementById("wep_key_length");var e=document.getElementById("wep_key_type");var a=5;if(c.value=="wep128"){a=13}var d="HEX pairs";if(e&&e.value=="2"){d="ASCII characters"}b.realname="WEP key ("+a+" "+d+")"}function validateWepKey(c,b,h){var g=document.getElementById("security");if(g.value.toUpperCase()=="WEP"){var k=document.getElementById(c);var a=document.getElementById("wep_key_length");var d=document.getElementById("wep_key_type");var e=10;var f=WEP64_regex;if(a.value=="wep128"){e=26;f=WEP128_regex}if(d&&d.value=="2"){f=null;if(e==10){e=5}else{e=13}}if(h==""||h.length!=e){return false}if(f!=null&&f.exec(h)==null){return false}}return true}function validateWpaKey(f,a,c){var e=document.getElementById("security");var d=e.value.toUpperCase();var b=document.getElementById("wpa_auth");if(b){b=b.value.toUpperCase()}if(d.substring(0,3)=="WPA"&&(b!="WPA-EAP")){if(c==""||c.length<8||c.length>63){return false}if(!/^[ -~]{8,63}$/.test(c)){return false}}return true}function validateWpaIdent(d,a,c){security=$("#security").val().toUpperCase();var b=$("#wpa_auth").val().toUpperCase();if(security.substring(0,3)=="WPA"&&b=="WPA-EAP"){if(c==""||c.length<1||c.length>63){return false}if(!/^[ -~]{1,63}$/.test(c)){return false}}return true}function shaperStatusClicked(){var a=$("#shaper_status").is(":checked");$(".i_shaper").disable(!a);$(".shaper").toggle(a)}function getRegdomainMode(a){if(a=="a"||a=="11naht"){return"A"}if(a=="b"){return"B"}return"G"}function checkChanShiftFlags(b,c){var a=!parseInt(b);if(a&&!(c[2]&1)){return false}if(!a&&!(c[2]&2)){return false}return true}function parse_full_regdomain(d){var g;var p;var h;var a;var e;var l;var f=[];var c=0;var n;var m=false;for(g=1;g<d.length-1;g++){p=d[g].split(/\s+/);h=p[2];a=parseInt(p[0]);l=a;if(h=="T"){if(a<3000||a>=10000){h="G";continue}else{h="A"}}e=p[3];if(e=="20"){e="0"}else{if(e=="10"){e="1"}else{if(e=="5"){e="2"}else{e="T"}}}if(!f[h]){f[h]=[]}if(!f[h][e]){f[h][e]=[]}c=parseInt(p[5]);if(isNaN(c)){c=0}dfs_chan=((c&9)==9);m=m||dfs_chan;if(parseInt(p[6])){n=2}else{n=1}var b=parseInt(p[7]);if(isNaN(b)){b=1}if(!f[h][e][l]){f[h][e][l]=[p[0],parseFloat(p[4]),n,c,b,dfs_chan]}else{f[h][e][l][2]|=n}if((c&3)==3||(c&5)==5){if(!f[h]["E"]){f[h]["E"]=[]}if(!f[h]["E"][l]){f[h]["E"][l]=[p[0],parseFloat(p[4]),n,c,b,dfs_chan]}else{f[h]["E"][l][2]|=n}}}var k={regdomain:f,has_dfs:m};return k}function selectToArray(b){var a=[];var c=0;b.find("option").each(function(){a[c]=[];a[c].value=$(this).val();a[c++].display=$(this).text()});return a}function arrayToSelect(a,b,e){var c="";for(var d=0;d<b.length;++d){if(e&&!e(d)){continue}c+='<option value="'+b[d].value+'">'+b[d].display+"</option>"}a.html(c)}function filterRates(d){var a=$("#rate");MIN_WEP_INDEX=3;if(typeof filterRates.all=="undefined"){filterRates.all=selectToArray(a)}var b=selectToArray(a);var c=a.prop("selectedIndex");if(/^(wep|wpa|wpatkip|wpa2|wpa2tkip)$/.test(d)){if(filterRates.all.length==b.length){arrayToSelect(a,filterRates.all,function(f){return(f>=MIN_WEP_INDEX)});c=(c<=MIN_WEP_INDEX)?0:c-MIN_WEP_INDEX;$("#rate option:eq("+c+")").attr("selected","selected")}}else{if(filterRates.all.length>b.length){arrayToSelect(a,filterRates.all);var e=$("#rate_auto").is(":checked");if(!e||e&&c>0){c+=MIN_WEP_INDEX}$("#rate option:eq("+c+")").attr("selected","selected")}}}function get_scan_channels(c,a,b,h,l,k,g){var d;var n=[];var f=getRegdomainMode(a);if(!c[f]||!c[f][b]){return n}var e=c[f][b];if(b=="E"&&c[f][0]&&!k){var m=c[f]["0"];o:for(d in m){for(j in e){if(e[j][0]==m[d][0]){continue o}}e.push(m[d])}}for(d in e){if(!checkChanShiftFlags(h,e[d])){continue}if(l&&e[d][4]==0){continue}if(g&&e[d][5]==1){continue}n[d]=e[d][0]}n.sort();return n}function init_sta_power(b){var f;var d;var c;var e=[];var a;for(f in b){e[f]=[];for(d in b[f]){for(c in b[f][d]){a=b[f][d][c][1];if(isNaN(a)){continue}if(!e[f][d]){e[f][d]=[a]}else{if(e[f][d][0]<a){e[f][d][0]=a}}}}}return e}function getRegdomainClksel(a){switch(a){case"T":case"0":case"1":case"2":return a;default:return"0"}}function fix_turbo_settings(d,c){var b=document.getElementById("ieee_mode");var a=document.getElementById("clksel");if(c=="T"){c="0";d="ast"}if(b){b.value=d}if(a){a.value=c}}function ChannelWidth(d){var c={"5":{clksel:"2"},"10":{clksel:"1"},"20":{clksel:"0"},"40":{clksel:"E",label:globals.i18n.ht40_label}};function e(f){if(c[f]&&c[f].label){return c[f].label}else{return""+f+" MHz"}}function b(f){if(c[f]){return c[f].clksel}else{if(f<6){return"2"}if(f<11){return"1"}return"0"}}function a(f){return c[f]?0:f}this.width=d;this.clksel=b(d);this.label=e(d);this.cfg=a(d)}function getChannelWidths(d){var h=1,f=40;var b=(d/4294967295)|0;var e=(d&4294967295);var g=[];for(var c=f;c>=h;c--){var a;if(c<=32){a=e&(1<<(c-1))}else{a=b&(1<<(c-32-1))}if(a){g.push(new ChannelWidth(c))}}return g}function init_clksel(d,b,k,g){var e=getRegdomainMode(b);if(!d[e]){return k}var h=document.getElementById("clksel_select");if(!h){return k}var l=h.options;l.length=0;var c=k,a=g;var f=getChannelWidths(globals.supported_chanbw);$.each(f,function(m,q){if(d[e][q.clksel]){var p=(q.clksel==c)&&(q.cfg==a);var n=new Option(q.label,q.clksel,false,p);l[l.length]=n;$.data(n,"chanbw",q.cfg)}});globals.chanbw=g;return l.length?h.options[h.selectedIndex].value:k}function init_frequencies(d,k,h,p,q,c,e){var t=$("#chan_freq");if(t.is(":hidden")){return q}var l=getRegdomainMode(k);if(!d[l]||!d[l][h]){return q}var f=[];var b=d[l][h];var n=$("#obey_regulatory_checkbox").is(":checked");for(var s in b){if(!checkChanShiftFlags(p,b[s])||(n&&b[s][4]==0)){continue}var u={};u.freq=b[s][0];u.dfs=b[s][5];f.push(u)}f.sort(function(x,w){return x.freq-w.freq});var m=[];m.push('<option value="0">'+jsTranslate("auto")+"</option>");dfs_lock=false;if((country==840||country==630||country==124)){if(!unii_supported){dfs_lock=true}else{if(country!=124){dfs_lock=unii_locked}}}var r=false;if(requiresCE(country)||country==756){r=true}$.each(f,function(w,y){if((dfs_lock&&y.dfs)||(r&&e&&isFreqIndoor(y.freq))){}else{var x='<option value="'+y.freq+'"';if(!y.dfs){x+=(r&&isFreqIndoor(y.freq)?' class="indoor"':"")+">"+y.freq+(r&&isFreqIndoor(y.freq)?" (Indoor)":"")+"</option>"}else{x+=' class="dfs'+(r&&isFreqIndoor(y.freq)?" indoor":"")+'"';x+=">"+y.freq+" (DFS"+(r&&isFreqIndoor(y.freq)?" + Indoor":"")+")</option>"}m.push(x)}});var a=t.val();t.empty().append(m.join(""));if(!c){t.val(q);if(t.val()!=q){t.val(0)}}else{t.val(a);if(t.val()!=a){var g=0;for(var s=f.length-1;s>=0&&g==0;s--){if(f[s]<=a){g=f[s];found=true}}t.val(g)}}var v=t.val();$(document).trigger("frequencies_updated");return v}function get_channel_by_freq(a,c){if(!a||!c){return null}var b;for(b in a){if(a[b][0]==c){return b}}return null}function setMaxrate(d,b){var a=document.getElementById(d);var c=document.getElementById("maxrate");if(!a||!a.length){return false}if(c){c.innerHTML=a.options[a.length-1].text}}function getRegdomainPower(d,k,b,c,e){var g=getRegdomainMode(b);var a=txpower_max;var h=null;var f;if(country=="511"||country=="124"||((country=="840"||country=="630")&&is_A(b))){if(country!="511"&&is_A(b)&&e<5730){}else{obey=false;return 100}}f=d[g][c];h=get_channel_by_freq(f,e);if(h==null){if(k[g]&&k[g][c]){a=k[g][c][0]}}else{if(d[g]&&d[g][c]&&d[g][c][h]){a=d[g][c][h][1]}}return a}function toggleObeyRegulatory(){reinit_form(3);var a=document.getElementById("txpower");if(!a){return false}a.minvalue=calc_min_txpower(radio_chains,txpower_offset,txpower_max,low_txpower_atten,low_txpower_limit);a.maxvalue=calc_max_txpower();a.setAttribute("minvalue",a.minvalue);a.setAttribute("maxvalue",a.maxvalue);if(a.minvalue>a.maxvalue){a.minvalue=a.maxvalue}a.slider.setMinimum(a.minvalue);a.slider.setMaximum(a.maxvalue);a.slider.setMaxMarker(a.maxvalue);if(a.value>a.maxvalue){a.value=a.maxvalue;a.onchange()}else{if(a.value<a.minvalue){a.value=a.minvalue;a.onchange()}}$(document).trigger("obey_toggled")}function init_power(a,d,c,b,e){txpower_regdomain_limit=getRegdomainPower(a,d,c,b,e);toggleObeyRegulatory()}function onIEEEMode(a){ieee_mode=a.options[a.selectedIndex].value;reinit_form(1)}function onClksel(a){old_clksel=clksel;var b=a.options[a.selectedIndex];clksel=b.value;globals.chanbw=$.data(b,"chanbw");$("#clksel").val(clksel);submitNoSave()}function onChanshift(a){chanshift=a.options[a.selectedIndex].value;reinit_form(3)}function onFrequency(a){chan_freq=a.options[a.selectedIndex].value;reinit_form(4)}function onExtChannel(a){extchannel=a.options[a.selectedIndex].value;document.getElementById("extchannel").value=extchannel;reinit_form(5)}function onSecurity(a,c){chooseSecurity(a,c);if(parseInt(radio_chains)==1){return}var b=$("#rate").val();filterRates(a.value);var d=$("#rate").val();if(b!=d){rate=d;reinit_form(2,true)}}function getClkSelWeight(a){switch(a){case"2":return 1;case"1":return 2;default:return 4}}function calculateNewRateMultiplier(a,b){return getClkSelWeight(b)/getClkSelWeight(a)}function adjustMulticastRate(d,g,b){var c;var f;var a=document.getElementById(b);var e=document.getElementById("mcast_rate");if(!e||!a||!a.length){return d}f=adjustRate(d,g);d=a.options[0].value;for(c=0;c<a.length;c++){if(f==a.options[c].value){d=f}}e.value=d;return d}function on_antenna_gain_change(b){_gain=new Number($("#antenna_gain").val());if(isFinite(_gain)){antenna_gain=_gain.valueOf();if(antenna_gain>40){$("#antenna_gain").val(40)}if(_gain<0){$("#antenna_gain").val(0)}if($("#obey_regulatory_checkbox").is(":checked")){var a=calc_max_txpower();if(a<=0){antenna_gain=calc_max_gain();$("#antenna_gain").val(antenna_gain)}}toggleObeyRegulatory()}else{$("#antenna_gain").val(0)}}function on_cable_loss_change(b){_loss=new Number($("#cable_loss").val());if(isFinite(_loss)){cable_loss=_loss.valueOf();if(cable_loss>40){$("#cable_loss").val(40)}if(cable_loss<0){$("#cable_loss").val(0)}if($("#obey_regulatory_checkbox").is(":checked")){var a=calc_max_txpower();if(a<=0){cable_loss=calc_min_loss();$("#cable_loss").val(cable_loss)}}toggleObeyRegulatory()}else{$("#cable_loss").val(0)}}function requiresCE(b){var a=[40,56,100,191,196,203,208,233,246,250,276,300,348,352,372,380,428,438,440,442,470,528,530,578,616,620,642,703,705,724,752,826];return($.inArray(parseInt(b),a)!=-1)}function requiresFCC(b){var a=[84,124,188,214,222,320,340,388,484,530,591,630,780,840,];return($.inArray(parseInt(b),a)!=-1)}function is_G(a){return a.toUpperCase().indexOf("G")>=0}function is_A(a){return !is_G(a)}function calc_max_txpower(){if(!$("#obey_regulatory_checkbox").is(":checked")){return txpower_max}var a=txpower_regdomain_limit-antenna_gain+cable_loss;var b=$("#ieee_mode").val();if(requiresFCC(country)){if(country!="124"&&is_G(b)&&antenna_gain>=6){a=32-Math.ceil((antenna_gain-cable_loss)/3)}if((country!="124"&&country!="840"&&country!="630")&&is_A(b)&&antenna_gain>23){a=53-antenna_gain-cable_loss}}if(a>txpower_regdomain_limit){a=txpower_regdomain_limit}if(a>txpower_max){a=txpower_max}return a}function calc_min_txpower(f,g,b,e,a){var d=0;switch(f){case 2:d=3;break;case 3:d=5;break}var c=0;if(radio_low_txpower_mode){c=b-e-a;if(c<(g+d-e)){c=g+d-e}}else{c=g+d}return c}function calc_max_gain(){var a=parseInt($("#txpower").val());var c=txpower_regdomain_limit-a+cable_loss;var b=$("#ieee_mode").val();if(requiresFCC(country)){if(is_G(b)&&c>=6){c=96-a*3+cable_loss}if(is_A(b)&&c>23){c=53-a+cable_loss}}return c}function calc_min_loss(){var a=parseInt($("#txpower").val());var d=parseInt($("#antenna_gain").val());var c=$("#ieee_mode").val();var b=d+a-txpower_regdomain_limit;if(requiresFCC(country)){if(is_G(c)&&d>=6){b=d-96+a*3}if(is_A(c)&&d>23){b=d-53+a}}return b}function toggleMACACL(){var a=$("#mac_acl_status").is(":checked");$(".i_macacl").disable(!a);$(".macacl").toggle(a)}function toggleRadiusMACACL(){setNoSecEnabled(true,false)}function toggleRadiusAcct(){var a=$("#radius_acct_status");var b=a.is(":visible")&&a.is(":checked");$(".radacct").toggle(b);$(".i_radacct").disable(!b)}function doStaSubmit(a){if($("#cc",a).is(":disabled")){if(!validateStandard(a,"error")){return false}}return true}function doAPSubmit(a){mac_error_set=0;if($("#cc",a).is(":disabled")){if(!validateStandard(a,"error")){return false}if(!validateFrequency()||!validateFreqListStatus()){return false}}return true}function submitNoSave(){var a=["wpa_auth","wpa_eap","wep_key_length","wep_key_type","wep_key_id"];var b=$("#this_form");$.each(a,function(c,d){if($("#"+this).is(":disabled")){b.append('<input type="hidden" name="'+this+'" value="'+$("#"+this).val()+'"/>')}});$("#cc").enable();b.submit()}function onChangeAPSubmit(){submitNoSave()}function onStaChangeSubmit(){submitNoSave()}function onAntennaChange(a){if($("#rate option:selected").index()==0){$("#this_form").append('<input type="hidden" name="select_max_rate" value="1"/>')}return a?onChangeAPSubmit():onStaChangeSubmit()}function validateChannels(a,c){if(c.length==0){return false}for(var b=0;b<c.length;++b){if($.inArray(c[b],a)==-1){return false}}return true}function validateChannelScanList(e,c,d){if(!$("#channel_scan_list").is(":checked")){return true}var a=get_current_scan_channels(d);var b=get_scan_channels(regdomain,ieee_mode,clksel,chanshift,obey,is_ap,dfs_lock);return validateChannels(b,a)}function toggleScanChannels(){var a=$("#channel_scan_list").is(":checked");$("#scan_channels").toggle(a);$("#edit_scan_channels").toggle(a)}function openScanChannelSelect(){openScanChannelSelectEx("scan_channels")}function openScanChannelSelectEx(c){var a="scan_channels.php";a+="?ieee_mode="+ieee_mode;a+="&country="+country;a+="&clksel="+clksel;a+="&chanshift="+chanshift;a+="&obey="+obey;a+="&elemId="+c;var b=document.getElementById(c);a+="&scan_channels="+$("#"+c).val();return openPage(a,700)}function setScanChannels(b,a){$("#"+b).val(a)}function get_current_scan_channels(d){var c=/^[0-9, ]*$/;var b=/ /g;if(d==null||d.length==0||c.exec(d)==null){return[]}var a=d.replace(b,"");return a.split(",")}function validateFrequency(){if(!$("#channel_scan_list").is(":checked")){return true}var b=$("#chan_freq").val();var c=(b==0);if(!c){var a=get_current_scan_channels($("#scan_channels").val());for(i=0;!c&&i<a.length;++i){c=(a[i]==b)}}if(!c){setError(jsTranslate("err_invalid_freq"))}return c}function validateFreqListStatus(){if(polling&&polling_fh&&!$("#channel_scan_list").is(":checked")){setError(jsTranslate("err_freq_list_status"));return false}return true}function updateFreqList(){var c=$("#chan_freq option").map(function(e,f){return $(f).val()}).get();var a=get_current_scan_channels($("#scan_channels").val());var d=[];for(var b=0;b<a.length;++b){if($.inArray(a[b],c)!=-1){d[d.length]=a[b]}}if(a.length!=d.length){$("#scan_channels").val(d.join(","))}}function isFreqIndoor(b){var a=parseInt(b);if(a>=5180&&a<=5320){return true}else{return false}};